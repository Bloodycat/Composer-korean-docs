<!DOCTYPE html>
<html>
<head>
    <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

    <title>Scripts - 스크립트</title>
    <meta name="description" content="컴포저 한글 메뉴얼에 대한 메뉴얼 페이지입니다." />

    <script src="/Composer-korean-docs/js/prism.js"></script>

    <link rel="stylesheet" href="/Composer-korean-docs/css/layout.css" />
    <link rel="canonical" href="http://www.xpressengine.com/Composer-korean-docs/doc/articles/scripts.md/" >
</head>

</head>

<body>

    <header>
    <div class="wrap">
        <div class="logo">
            <a href="/Composer-korean-docs/"><img src="/Composer-korean-docs/images/logo-composer-transparent.png" /></a>
            <h1>Composer korean docs<small>Composer 의 한글 매뉴얼입니다.</small></h1>
        </div>
        <div class="btn_area">
            <a class="button" href="https://github.com/xpressengine/Composer-korean-docs/tree/master/KR">View on Github</a>
            <a class="button" href="https://github.com/xpressengine/Composer-korean-docs.git">Git Repository</a>
        </div>
    </div>
</header>
<div class="body docs">
    <div class="wrap clearfix">
        <aside class="sidebar">
            <div class="title">메뉴얼</div>
<ul>
    <li>00 - <a href="/Composer-korean-docs/doc/00-intro.md">소개하기</a></li>
    <li>01 - <a href="/Composer-korean-docs/doc/01-basic-usage.md">기본 사용법</a></li>
    <li>02 - <a href="/Composer-korean-docs/doc/02-libraries.md">라이브러리</a></li>
    <li>03 - <a href="/Composer-korean-docs/doc/03-cli.md">커맨드라인 인터페이스 / 명령어</a></li>
    <li>04 - <a href="/Composer-korean-docs/doc/04-schema.md">composer.json의 구조</a></li>
    <li>05 - <a href="/Composer-korean-docs/doc/05-repositories.md">Repositories - 저장소</a></li>
    <li>06 - <a href="/Composer-korean-docs/doc/05-repositories.md">커뮤니티</a></li>
</ul>

<div class="title">기타항목</div>
<ul>
    <li><p><a href="/Composer-korean-docs/doc/articles/aliases.md">Aliases-별칭</a>
        : 버전과 브랜치 네임의 별칭을 구성하는 법 </p></li>
    <li><p><a href="/Composer-korean-docs/doc/articles/custom-installers.md">커스텀 인스톨러</a>
        : 패키지의 특정한 유형의 설치 방법을 수정하기</p></li>
    <li><p><a href="/Composer-korean-docs/doc/articles/handling-private-packages-with-satis.md">Satis 또는 Toran 프록시를 통해서 전용 패키지를 구성하는법</a>
        : 고유한 자신의 컴포저 저장소를 운영하는 방법</p></li>
    <li><p><a href="/Composer-korean-docs/doc/articles/http-basic-authentication.md">HTTP 기본 인증 사용법</a>
        : private 호스트에 위치한 패키지에 엑세스 하는 방법</p></li>
    <li><p><a href="/Composer-korean-docs/doc/articles/plugins.md">플러그인을 설정하고 사용하는 방법</a>
        : 컴포저의 기능을 확장하고 수정하는 방법</p></li>
    <li><p><a href="/Composer-korean-docs/doc/articles/scripts.md">스크립트</a>
        : 패키지를 설치한 전후에 호출되는 스크립트 콜백</p></li>
    <li><p><a href="/Composer-korean-docs/doc/articles/troubleshooting.md">트러블 슈팅</a>
        : 문제점 해결</p></li>
    <li><p><a href="/Composer-korean-docs/doc/articles/vendor-binaries.md">벤더 바이너리와 <code>vendor/bin</code> 디렉토리</a>
        : 패키지의 커맨드라인 스크립트를 확인하는 방법 </p></li>
</ul>

<div class="title">supported by</div>
<ul>
    <li><a href="http://www.xpressengine.com/" target="_blank"><img src="/Composer-korean-docs/images/XE_symbol_512.png" width="144" border="0" /></a></li>
    <li><a href="http://dev.naver.com/d2" target="_blank"><img src="/Composer-korean-docs/images/NAVER_D2_c_hor.png" width="144"/></a></li>
</ul>

<div class="title">Other Project</div>
<ul>
    <li><a href="http://xpressengine.github.io/XEIcon/" target="_blank"><img src="/Composer-korean-docs/images/xeicon_banner.png" width="144"/></a></li>
    <li><a href="http://xpressengine.github.io/laravel-korean-docs/" target="_blank"><img src="/Composer-korean-docs/images/laravel-banner.png" width="144"/></a></li>
    <li>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</li>
</ul>

        </aside>


    <article class="content">
        <h1 id="scripts---">Scripts - 스크립트</h1>

<h2 id="script">스크립트(script)란?</h2>

<p>컴포저에서 이야기 하는 스크립트(script)는 PHP의 콜백(정적 메서드로도 정의할 수 있는) 혹은 커맨드 라인 환경에서 실행가능한 명령어를 이야기 합니다. 스크립트는 사용자가 만든 패키지의 맞춤형 코드 혹은 컴포저 실행 과정 중간에 발생하는 특정 명령어를 실행하는데 굉장히 유용합니다.</p>

<blockquote>
  <p><strong>참고:</strong> 스크립트는 루트 패키지의 <code>composer.json</code>에서만 실행가능합니다. 만약 루트 패키지의 의존성 패키지에 스크립트가 정의되어 있다면, 컴포저는 해당 스크립트를 실행하지 않습니다.</p>
</blockquote>

<h2 id="section">사용가능한 이벤트들</h2>

<p>컴포저는 실행과정 중에 다음 정의된 이벤트들을 실행합니다:</p>

<ul>
  <li><strong>pre-install-cmd</strong>: <code>install</code> 커맨드가 실행되기 전에 발생합니다.</li>
  <li><strong>post-install-cmd</strong>: <code>install</code> 커맨드가 실행된 후에 발생합니다.</li>
  <li><strong>pre-update-cmd</strong>: <code>update</code> 커맨드가 실행되기 전에 발생합니다.</li>
  <li><strong>post-update-cmd</strong>: <code>update</code> 커맨드가 실행 된 후에 발생합니다.</li>
  <li><strong>pre-status-cmd</strong>: <code>status</code> 커맨드가 실행되기 전에 발생합니다.</li>
  <li><strong>post-status-cmd</strong>: <code>status</code> 커맨드 실행 된 후에 발생합니다.</li>
  <li><strong>pre-dependencies-solving</strong>: 의존성이 해결되기 전에 발생합니다.</li>
  <li><strong>post-dependencies-solving</strong>: 의존성이 해결 된 후에 발생합니다.</li>
  <li><strong>pre-package-install</strong>: 패키지가 인스톨 되기 전에 발생합니다.</li>
  <li><strong>post-package-install</strong>: 패키지가 인스톨 된 후에 발생합니다.</li>
  <li><strong>pre-package-update</strong>: 패키지가 업데이트 되기 전에 발생합니다.</li>
  <li><strong>post-package-update</strong>: 패키지가 업데이트 된 후에 발생합니다.</li>
  <li><strong>pre-package-uninstall</strong>: 패키지가 삭제(uninstall) 되기 전에 발생합니다.</li>
  <li><strong>post-package-uninstall</strong>: 패키지가 삭제(uninstall) 된 후에 발생합니다.</li>
  <li><strong>pre-autoload-dump</strong>: 오토로더가 덤프되기 전에 발생합니다. 이는 <code>install</code>/<code>update</code> 즉 <code>dump-autoload</code>를 사용하는 커맨드를 의미합니다.</li>
  <li><strong>post-autoload-dump</strong>: 오토로더가 덤프된 후에 발생합니다. 이는 <code>install</code>/<code>update</code> 즉 <code>dump-autoload</code>를 사용하는 커맨드를 의미합니다.</li>
  <li><strong>post-root-package-install</strong>: <code>create-project</code> 커맨드가 되는 동안, 루트 패키지가 인스톨 되고 난 후에 발생합니다.</li>
  <li><strong>post-create-project-cmd</strong>: <code>create-project</code> 커맨드가 실행 된 후에 발생합니다.</li>
  <li><strong>pre-archive-cmd</strong>: <code>archive</code> 커맨드가 실행되기 전에 발생합니다.</li>
  <li><strong>post-archive-cmd</strong>: <code>archive</code> 커맨드가 실행된 후에 발생합니다.</li>
</ul>

<blockquote>
  <p><strong>주의:</strong> 컴포저는 의존하고 있는 패키지들이 <code>install</code>, <code>update</code> 전에 하는 상태에 대해서 어떠한 가정도 할 수 없습니다. 그래서 <code>pre-update-cmd</code> 혹은, <code>pre-install-cmd</code> 이벤트 훅(hook) 안에 어떤 의존성 패키지들을 필요로 하는 지에 대해 스크립트를 작성하지 않아도 됩니다. 만약 당신이 <code>intall</code>, <code>update</code>이전에 스크립트를 실행해야 한다면 당신의 루트 패키지 안에 있는 그들 각 패키지 내부에 있는지 확인하십시오.</p>
</blockquote>

<h2 id="section-1">스크립트 정의하기</h2>

<p><code>composer.json</code>에 <code>"scripts"</code>라는 속성을 가질 수 있습니다. 이는 이벤트와 그 이벤트에 대응하는 스크립트의 쌍(pair)을 포함하고 있습니다.  이벤트의 스크립트는 문자열(하나의 스크립트를 위한) 또는 배열(하나 혹은 여러개의 스크립트를 위한)의 두가지 형태로 정의가능합니다.</p>

<p>주어진 이벤트에 대해서:</p>

<ul>
  <li>스크립트 이벤트가 발생할 때 정의된 순서대로 실행됩니다.</li>
  <li>스크립트를 배열로 사용할 때, PHP 콜백과 CLI환경에서 실행가능한 커맨드 둘다 동시에 포함할 수 있습니다.</li>
  <li>콜백을 포함한 PHP클래스는 반드시 컴포저에서 오토로드 할 수 있어야합니다.</li>
</ul>

<p>스크립트 정의 예제:</p>

<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&quot;scripts&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;post-update-cmd&quot;</span><span class="p">:</span> <span class="s2">&quot;MyVendor\\MyClass::postUpdate&quot;</span><span class="p">,</span>
        <span class="nt">&quot;post-package-install&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;MyVendor\\MyClass::postPackageInstall&quot;</span>
        <span class="p">],</span>
        <span class="nt">&quot;post-install-cmd&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;MyVendor\\MyClass::warmCache&quot;</span><span class="p">,</span>
            <span class="s2">&quot;phpunit -c app/&quot;</span>
        <span class="p">],</span>
        <span class="nt">&quot;post-create-project-cmd&quot;</span> <span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;php -r \&quot;copy(&#39;config/local-example.php&#39;, &#39;config/local.php&#39;);\&quot;&quot;</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>위의 예제에서 사용한 <code>MyVendor\MyClass</code>라는 클래스는 다음의 PHP를 실행할 것입니다:</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">MyVendor</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Composer\Script\Event</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MyClass</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">postUpdate</span><span class="p">(</span><span class="nx">Event</span> <span class="nv">$event</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$composer</span> <span class="o">=</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getComposer</span><span class="p">();</span>
        <span class="c1">// do stuff</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">postPackageInstall</span><span class="p">(</span><span class="nx">Event</span> <span class="nv">$event</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$installedPackage</span> <span class="o">=</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getOperation</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getPackage</span><span class="p">();</span>
        <span class="c1">// do stuff</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">warmCache</span><span class="p">(</span><span class="nx">Event</span> <span class="nv">$event</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// make cache toasty</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>이벤트가 발생 했을 때, 컴포저의 내부 이벤트 핸들러는 <code>Composer\Script\Event</code> 객체를 받습니다. 그리고 이 객체는 PHP 콜백의 첫번째 매개변수로 사용가능합니다. 이 <code>Event</code> 다음 접근자를 통해 다른 객체에 접근할 수 있습니다:</p>

<ul>
  <li><code>getComposer()</code>: 현재 <code>Composer\Composer</code> 객체를 반환합니다.</li>
  <li><code>getName()</code>: 발생한 이벤트의 이름을 문자열로 반환합니다.</li>
  <li><code>getIO()</code>: returns the current input/output stream which implements
콘솔에 쓸 수 있는 <code>Composer\IO\IOInterface</code> 인터페이스를 구현한 현재의 인, 아웃풋 스트림을 반환합니다.</li>
</ul>

<h2 id="section-2">스크립트 직접 실행</h2>

<p>스크립트를 직접 실행하고 싶다면 다음의 명령어를 이용하면 됩니다:</p>

<div class="highlight"><pre><code class="language-sh" data-lang="sh">composer run-script <span class="o">[</span>--dev<span class="o">]</span> <span class="o">[</span>--no-dev<span class="o">]</span> script</code></pre></div>

<p>예를들어 <code>composer run-script post-install-cmd</code>은 <strong>post-install-cmd</strong>에 정의된 스크립트들을 실행할 것입니다.</p>

<p>또 <code>--</code>를 추가하여 매개변수들을 추가할 수 있습니다. 예를 들어,
<code>composer run-script post-install-cmd -- --check</code>는 <code>--check</code>를 스크립트 핸들러로 보냅니다. 이러한 매개변수는 CLI 매개변수로서 사용할 수 있고, PHP 핸들러에서 <code>$event-&gt;getArguments()</code>를 통해 배열로서 불러올 수 있습니다.</p>

<h2 id="section-3">사용자 정의 커맨드</h2>

<p>위에 명시된 사용할 수 있는 이벤트 중에 원하는 것이 없다면 사용자 정의 스크립트를 추가할 수 있습니다. 그리고 이는 run-script를 통해서 사용가능하고, 컴포저의 자연스러운 커맨드 처럼 사용할 수 있습니다. 예를 들어 아래와 같이 단순한 내용을 정의하였다면 <code>composer test</code>라는 명령어를 통해 사용가능합니다:</p>

<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&quot;scripts&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;test&quot;</span><span class="p">:</span> <span class="s2">&quot;phpunit&quot;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<blockquote>
  <p><strong>참고:</strong> 컴포저의 <a href="/Composer-korean-docs/doc/articles/vendor-binaries.md#vendor-binaries를-vendor/bin-이외에-다른-곳에 설치가-가능한가요-">bin-dir</a>은 PATH의 최상위를 입력할 수 있는데, 이는 의존하고 있는 패키지들의 실행파일들을 쉽게 CLI 커맨드로서 입력할 수 있게 합니다.
예를들어 PHPUnit을 의존하고 있고, <code>bin-dir</code>을 <code>scripts</code>라는 값으로 설정을 해놓았다면 스크립트에서 <code>scripts/phpunit</code>라는 값을 통해 접근이 가능합니다.</p>
</blockquote>

    </article>

        </div>
</div>

<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-46389165-6");
        pageTracker._trackPageview();
    } catch(err) {}
</script>


</body>
</html>
