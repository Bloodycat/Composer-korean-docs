<!DOCTYPE html>
<html>
<head>
    <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

    <title>Setting up and using plugins - 플러그인 설정및 사용법</title>
    <meta name="description" content="컴포저 한글 메뉴얼에 대한 메뉴얼 페이지입니다." />

    <script src="/Composer-korean-docs/js/prism.js"></script>

    <link rel="stylesheet" href="/Composer-korean-docs/css/layout.css" />
    <link rel="canonical" href="http://www.xpressengine.com/Composer-korean-docs/doc/articles/plugins.md/" >
</head>

</head>

<body>

    <header>
    <div class="wrap">
        <div class="logo">
            <a href="/Composer-korean-docs/"><img src="/Composer-korean-docs/images/logo-composer-transparent.png" /></a>
            <h1>Composer korean docs<small>Composer 의 한글 매뉴얼입니다.</small></h1>
        </div>
        <div class="btn_area">
            <a class="button" href="https://github.com/xpressengine/Composer-korean-docs/tree/master/KR">View on Github</a>
            <a class="button" href="https://github.com/xpressengine/Composer-korean-docs.git">Git Repository</a>
        </div>
    </div>
</header>
<div class="body docs">
    <div class="wrap clearfix">
        <aside class="sidebar">
            <div class="title">메뉴얼</div>
<ul>
    <li>00 - <a href="/Composer-korean-docs/doc/00-intro.md">소개하기</a></li>
    <li>01 - <a href="/Composer-korean-docs/doc/01-basic-usage.md">기본 사용법</a></li>
    <li>02 - <a href="/Composer-korean-docs/doc/02-libraries.md">라이브러리</a></li>
    <li>03 - <a href="/Composer-korean-docs/doc/03-cli.md">커맨드라인 인터페이스 / 명령어</a></li>
    <li>04 - <a href="/Composer-korean-docs/doc/04-schema.md">composer.json의 구조</a></li>
    <li>05 - <a href="/Composer-korean-docs/doc/05-repositories.md">Repositories - 저장소</a></li>
    <li>06 - <a href="/Composer-korean-docs/doc/05-repositories.md">커뮤니티</a></li>
</ul>

<div class="title">기타항목</div>
<ul>
    <li><p><a href="/Composer-korean-docs/doc/articles/aliases.md">Aliases-별칭</a>
        : 버전과 브랜치 네임의 별칭을 구성하는 법 </p></li>
    <li><p><a href="/Composer-korean-docs/doc/articles/custom-installers.md">커스텀 인스톨러</a>
        : 패키지의 특정한 유형의 설치 방법을 수정하기</p></li>
    <li><p><a href="/Composer-korean-docs/doc/articles/handling-private-packages-with-satis.md">Satis 또는 Toran 프록시를 통해서 전용 패키지를 구성하는법</a>
        : 고유한 자신의 컴포저 저장소를 운영하는 방법</p></li>
    <li><p><a href="/Composer-korean-docs/doc/articles/http-basic-authentication.md">HTTP 기본 인증 사용법</a>
        : private 호스트에 위치한 패키지에 엑세스 하는 방법</p></li>
    <li><p><a href="/Composer-korean-docs/doc/articles/plugins.md">플러그인을 설정하고 사용하는 방법</a>
        : 컴포저의 기능을 확장하고 수정하는 방법</p></li>
    <li><p><a href="/Composer-korean-docs/doc/articles/scripts.md">스크립트</a>
        : 패키지를 설치한 전후에 호출되는 스크립트 콜백</p></li>
    <li><p><a href="/Composer-korean-docs/doc/articles/troubleshooting.md">트러블 슈팅</a>
        : 문제점 해결</p></li>
    <li><p><a href="/Composer-korean-docs/doc/articles/vendor-binaries.md">벤더 바이너리와 <code>vendor/bin</code> 디렉토리</a>
        : 패키지의 커맨드라인 스크립트를 확인하는 방법 </p></li>
</ul>

<div class="title">supported by</div>
<ul>
    <li><a href="http://www.xpressengine.com/" target="_blank"><img src="/Composer-korean-docs/images/XE_symbol_512.png" width="144" border="0" /></a></li>
    <li><a href="http://dev.naver.com/d2" target="_blank"><img src="/Composer-korean-docs/images/NAVER_D2_c_hor.png" width="144"/></a></li>
</ul>

<div class="title">Other Project</div>
<ul>
    <li><a href="http://xpressengine.github.io/XEIcon/" target="_blank"><img src="/Composer-korean-docs/images/xeicon_banner.png" width="144"/></a></li>
    <li><a href="http://xpressengine.github.io/laravel-korean-docs/" target="_blank"><img src="/Composer-korean-docs/images/laravel-banner.png" width="144"/></a></li>
    <li>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</li>
</ul>

        </aside>


    <article class="content">
        <h1 id="setting-up-and-using-plugins-----">Setting up and using plugins - 플러그인 설정및 사용법</h1>

<h2 id="synopsis---">Synopsis - 시놉시스</h2>

<p>여러분은 컴포저의 기능을 바꾸거나 확장하고 싶을 수 있습니다. 예를들어 대다수 사용자들이 적용지 않는 특별한 환경을 원하거나 대부분의 사용자들이 원치 않는 방식으로 컴포저를 이용해 뭔가를 하려할 수도 있습니다. </p>

<p>이런 경우에는 플러그인을 만드는 것을 고려해 볼 수 있습니다.</p>

<h2 id="section">플러그인 생성하기</h2>

<p>플러그인은 추가 패키지에 의존성이 있을 수 있는 정규 컴포저 패키지의 일부로 코드가 탑재되어 있습니다. </p>

<h3 id="section-1">플러그인 패키지</h3>

<p>플러그인 패키지 파일은 다른 패키지 파일과 같지만 다음과 같은 필수요건이 있습니다. </p>

<ol>
  <li>
    <p><a href="/Composer-korean-docs/doc/04-schema.md#type">type</a> 속성은 반드시 <code>composer-plugin</code> 이어야 합니다.</p>
  </li>
  <li>
    <p><a href="/Composer-korean-docs/doc/04-schema.md#extra">extra</a> 속성에는  플러그인의 클래스 (네임스페이스를 포함해서) 이름에대한 정보를 담은 <code>class</code> 요소가 반드시 포함되어야 합니다. 만약 패키지가 다수의 플러그인을 포함하는 구조라면 클래스 네임은 배열의 형태가 될 수 있습니다.  추가로 여러분의 플러그인과 호환되는 컴포저 API 버전에 대한 정보가 있는<code>composer-plugin-api</code>라는 특별한 패키지 require가 필요합니다. 현재 컴포저 플러그인 API 버전은 1.0.0 입니다.</p>
  </li>
</ol>

<p>다음 예제를 확인하십시오. </p>

<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;my/plugin-package&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;composer-plugin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;require&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;composer-plugin-api&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<h3 id="plugin-class----">Plugin Class - 플러그인 클래스</h3>

<p>모든 플러그인들은 <a href="https://github.com/composer/composer/blob/master/src/Composer/Plugin/PluginInterface.php"><code>Composer\Plugin\PluginInterface</code></a> 을 구현한 클래스가 있어야 합니다.
플러그인이 로딩된 후에 <code>activate()</code> 메소드가 <a href="https://github.com/composer/composer/blob/master/src/Composer/Composer.php"><code>Composer\Composer</code></a> 와 <a href="https://github.com/composer/composer/blob/master/src/Composer/IO/IOInterface.php"><code>Composer\IO\IOInterface</code></a> 인스턴스를 인자로 넘겨 받아서 호출됩니다. 이 두개의 객체를 활용하여 모든 설정은 모든 내부 오브젝트와 상태를 원하는 대로 조절할 수 있게 됩니다. </p>

<p>예제:</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">phpDocumentor\Composer</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Composer\Composer</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Composer\IO\IOInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Composer\Plugin\PluginInterface</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">TemplateInstallerPlugin</span> <span class="k">implements</span> <span class="nx">PluginInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">activate</span><span class="p">(</span><span class="nx">Composer</span> <span class="nv">$composer</span><span class="p">,</span> <span class="nx">IOInterface</span> <span class="nv">$io</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$installer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TemplateInstaller</span><span class="p">(</span><span class="nv">$io</span><span class="p">,</span> <span class="nv">$composer</span><span class="p">);</span>
        <span class="nv">$composer</span><span class="o">-&gt;</span><span class="na">getInstallationManager</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">addInstaller</span><span class="p">(</span><span class="nv">$installer</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<h2 id="event-handler----">Event Handler - 이벤트 핸들러</h2>

<p>추가적으로 플러그인이 로딩될 때 <code>EventDispatcher</code>로 자동으로 등록되기 위해서 <a href="https://github.com/composer/composer/blob/master/src/Composer/EventDispatcher/EventSubscriberInterface.php"><code>Composer\EventDispatcher\EventSubscriberInterface</code></a>를 구현할 수 있습니다. </p>

<p>플러그인에서 가능한 이벤트들은 다음과 같습니다. </p>

<ul>
  <li><strong>COMMAND</strong>,   COMMAND는 플러그인을 로드하는 모든 명령들의 시작 이벤트입니다.  이는 프로그램의 입출력 오브젝트들을 액세스 할 수 있게 해줍니다.</li>
  <li><strong>PRE_FILE_DOWNLOAD</strong>,  PRE_FILE_DOWNLOAD는 파일이 다운로드 되기전 발생하는 이벤트입니다. 다운로드받을 URL에서 파일을 다운받기전에<code>RemoteFilesystem</code>오브젝트를 조절하는데 사용 할 수 있습니다.</li>
</ul>

<blockquote>
  <p>플러그인은 또한 <a href="/Composer-korean-docs/doc/articles/scripts.md#event-names">script events</a>를 참고할 수 있습니다. </p>
</blockquote>

<p>예제:</p>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">Naderman\Composer\AWS</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Composer\Composer</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Composer\EventDispatcher\EventSubscriberInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Composer\IO\IOInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Composer\Plugin\PluginInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Composer\Plugin\PluginEvents</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Composer\Plugin\PreFileDownloadEvent</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">AwsPlugin</span> <span class="k">implements</span> <span class="nx">PluginInterface</span><span class="p">,</span> <span class="nx">EventSubscriberInterface</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$composer</span><span class="p">;</span>
    <span class="k">protected</span> <span class="nv">$io</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">activate</span><span class="p">(</span><span class="nx">Composer</span> <span class="nv">$composer</span><span class="p">,</span> <span class="nx">IOInterface</span> <span class="nv">$io</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">composer</span> <span class="o">=</span> <span class="nv">$composer</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">io</span> <span class="o">=</span> <span class="nv">$io</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">getSubscribedEvents</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">array</span><span class="p">(</span>
            <span class="nx">PluginEvents</span><span class="o">::</span><span class="na">PRE_FILE_DOWNLOAD</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="k">array</span><span class="p">(</span><span class="s1">&#39;onPreFileDownload&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="p">),</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">onPreFileDownload</span><span class="p">(</span><span class="nx">PreFileDownloadEvent</span> <span class="nv">$event</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$protocol</span> <span class="o">=</span> <span class="nb">parse_url</span><span class="p">(</span><span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getProcessedUrl</span><span class="p">(),</span> <span class="nx">PHP_URL_SCHEME</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$protocol</span> <span class="o">===</span> <span class="s1">&#39;s3&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$awsClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AwsClient</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">io</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">composer</span><span class="o">-&gt;</span><span class="na">getConfig</span><span class="p">());</span>
            <span class="nv">$s3RemoteFilesystem</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">S3RemoteFilesystem</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">io</span><span class="p">,</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getRemoteFilesystem</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getOptions</span><span class="p">(),</span> <span class="nv">$awsClient</span><span class="p">);</span>
            <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">setRemoteFilesystem</span><span class="p">(</span><span class="nv">$s3RemoteFilesystem</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>

<h2 id="using-plugins----">Using Plugins - 플러그인 사용하기</h2>

<p>플러그인 패키지가 설치되고 현재 프로젝트의 목록에서 확인되는 경우 자동으로 컴포저가 시작될 때 바로 로드됩니다. 추가적으로  컴포저 전역 명령어(global command)를 사용하여 <code>COMPOSER_HOME</code> 디렉토리에 설치된 모든 플러그인 패키지들은 로컬 프로젝트의 플러그인이 로딩되기 전에 로드됩니다. </p>

<blockquote>
  <p><code>--no-plugins</code> 컴포저 명령 옵션으로 모든 설치된 명령들을 비활성시킬 수 있습니다. 
이는 특히 설치나 업데이트를 할 때 플러그인들로 발생하는 에러를 방지하는데 유용합니다.</p>
</blockquote>


    </article>

        </div>
</div>

<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-46389165-6");
        pageTracker._trackPageview();
    } catch(err) {}
</script>


</body>
</html>
